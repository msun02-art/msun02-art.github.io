<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>FUNRUN â€“ Homepage</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Carlito:wght@400;700&display=swap"
    />
    <link rel="stylesheet" href="stylerun3.css" />
    <link rel="stylesheet" href="globals.css" />
  </head>
  <body>
    <div class="wrapper-main">
      <div class="iphone-pro">
        <header class="top-bar">
          <div class="user-info">
            <div class="avatar-circle"></div>
            <span class="username">Username</span>
          </div>
        </header>

        <div class="top-divider"></div>

        <div class="calendar-strip">
          <div class="weekday-row">
            <span>Mon</span>
            <span>Tue</span>
            <span>Wed</span>
            <span>Thu</span>
            <span>Fri</span>
            <span>Sat</span>
            <span>Sun</span>
          </div>
          <div class="date-row" id="calendar-dates"></div>
        </div>

        <div class="yellow-grid">
          <div class="notes-panel">
            <div class="notes-title">Notes</div>
            <textarea
              class="notes-text"
              placeholder="Write your notes here..."
            ></textarea>
          </div>

          <div class="progress-red">
            <div class="progress-header">Progress</div>
            <div class="progress-grid" id="progress-grid"></div>
          </div>

          <div class="plan-shape"></div>
          <div class="plan-header">Plan</div>
          <div class="plan-grid" id="plan-grid"></div>

          <div class="grid-cell cell-1"></div>
          <div class="grid-cell cell-2"></div>
          <div class="grid-cell cell-3"></div>
          <div class="grid-cell cell-4"></div>
          <div class="grid-cell cell-5"></div>
          <div class="grid-cell cell-6"></div>
          <div class="grid-cell cell-7"></div>
          <div class="grid-cell cell-8"></div>
        </div>

        <nav class="bottom-nav">
          <button class="nav-item nav-home active" aria-label="Home">
            Home
          </button>

          <button class="nav-item nav-run">
            Run Mode
          </button>

          <button class="nav-item nav-gallery">
            Gallery
          </button>
        </nav>
      </div>
    </div>

    <script>
      const datesRow = document.getElementById("calendar-dates");
      const weekdayRow = document.querySelector(".weekday-row");
      const weekdaySpans = weekdayRow ? weekdayRow.querySelectorAll("span") : [];

      const today = new Date();
      const todayDate = today.getDate();
      const todayMonth = today.getMonth();
      const todayYear = today.getFullYear();

      const jsDay = today.getDay(); 
      const mondayIndex = (jsDay + 6) % 7; 

      const monday = new Date(todayYear, todayMonth, todayDate - mondayIndex);

      datesRow.innerHTML = "";

      for (let i = 0; i < 7; i++) {
        const d = new Date(
          monday.getFullYear(),
          monday.getMonth(),
          monday.getDate() + i
        );

        const span = document.createElement("span");
        span.textContent = d.getDate();

        const isToday =
          d.getDate() === todayDate &&
          d.getMonth() === todayMonth &&
          d.getFullYear() === todayYear;

        if (isToday) {
          span.classList.add("today");
          if (weekdaySpans[i]) {
            weekdaySpans[i].classList.add("today");
          }
        }

        datesRow.appendChild(span);
      }

    
      const calendarStrip = document.querySelector(".calendar-strip");
      if (calendarStrip) {
        calendarStrip.addEventListener("click", () => {
          window.location.href = "calendar.html";
        });
      }

      const progressCard = document.querySelector(".progress-red");
      if (progressCard) {
        progressCard.addEventListener("click", () => {
          window.location.href = "progress.html";
        });
      }

      const planShape = document.querySelector(".plan-shape");
      const planHeader = document.querySelector(".plan-header");

      function goPlan() {
        window.location.href = "plan.html";
      }

      if (planShape) {
        planShape.addEventListener("click", goPlan);
      }
      if (planHeader) {
        planHeader.addEventListener("click", goPlan);
      }


      const homeBtn = document.querySelector(".nav-home");
      if (homeBtn) {
        homeBtn.addEventListener("click", () => {
          window.location.href = "homepage.html";
        });
      }

      const runBtn = document.querySelector(".nav-run");
      if (runBtn) {
        runBtn.addEventListener("click", () => {
          window.location.href = "runmode.html";
        });
      }

      const galleryBtn = document.querySelector(".nav-gallery");
      if (galleryBtn) {
        galleryBtn.addEventListener("click", () => {
          window.location.href = "gallery.html";
        });
      }
    </script>
  </body>
</html>